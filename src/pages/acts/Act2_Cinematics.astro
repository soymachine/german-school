---
import Avatar from "../../components/avatar/Avatar.astro";

interface Props {
	step: string
}

const { step } = Astro.props;

---
<div class="act-cinematics-wrapper">
    <div class="act-cinematics-center"> 
        <div class="act-cinematics-holder">
            <div class="speech">
                <div class="speech-bubble speech-bubble-element">
                    <div class="speech-bubble-text">
                        <div id="speech-content-act-2" class="speech-bubble-text-content">
                            
                        </div>
                    </div>                    
                </div>
                <img class="speech-bubble-element" id="speech-bubble-wedge" src="./imgs/acts/speech/speech-wedge.png">
                <a id="content-cinematic-act-2-button" class="speech-bubble-button" href="#">
                    <div class="speech-loading talking">
                        <img id="loading-gif" src="./imgs/acts/speech/speech-grey-loading.gif">
                        <img id="button-arrow" src="./imgs/acts/speech/speech-arrow.png">
                    </div>
                </a>
            </div>
            <!--
            <img class="act-cinematics-background-image" src="./imgs/acts/titles/act-II-Background.png">
            -->
            <div class="wrapper">
                <img class="act-cinematics-background-image act-cinematics-background-image-1" src="./imgs/acts/parallax/forest-background.jpg">
                <img class="act-cinematics-background-image act-cinematics-background-image-2" src="./imgs/acts/parallax/forest-foreground.png">
                <img class="act-cinematics-background-image act-cinematics-background-image-3" src="./imgs/acts/parallax/forest-tucan.png">
            </div>

        </div>
        <div class="characters">
            <div id="speech-user-avatar">
                <Avatar isSpeech={true} width={170} step={step} textCorrection={14}/>
            </div>
            <img class="character-image" id="sarah-act-2" src="./imgs/characters/sarah-speech.png">
            <img class="character-image" id="rafael-act-2" src="./imgs/characters/rafael-speech.png">
            <div class="character-name" id="sarah-name-act-2">Sarah</div>
            <div class="character-name" id="rafael-name-act-2">Dr. Rafael</div>
            <!-- 
            <div class="character-image" id="sarah">
                <img src="./imgs/characters/sarah-speech.png">
            </div>
            <div class="character-image" id="rafael">
                <img src="./imgs/characters/rafael-speech.png">
            </div>
            -->
        </div>
    </div>
</div>
<style>

    .wrapper{
        height: 404px;
        width: 448px;
        position: relative;
        overflow: hidden;
    }

    .act-cinematics-background-image{
        position: absolute;
        top:0px;
        left:0px;
        height: 310px;
        margin:auto 0;
        opacity: 0;
    }


    /* SPEECH */
    .speech {
        position: absolute;
        width: 100%;
        top: -16%;
        z-index: 1;
    }

    .speech-bubble {
        width: 62%;
        height: 150px;
        margin: auto;
        background-color: #EAEFF7;
        padding: 10px 20px;
        border: 2px solid #054696;
        /* drop hard shadow */
        box-shadow: 5px 5px 0px 0px rgb(0 0 0 / 55%);
    }
    .speech-loading {
        background-color: #00A5DC;
        width: 70px;
        padding: 1px 10px 2px 10px;
        margin: 0 auto;
        border-radius: 7px;
        border: 2px solid white;
        margin-top: -46px;
    }

    .talking {
        background-color: #999999;
        padding: 9px 10px;
    }

    #speech-bubble-wedge {
        margin-top: -2px;
        transform: translateX(110px);
    }

    .speech-bubble-text {
        height: 100%;
        margin: auto;
        display: flex;
    }

    .speech-bubble-text-content {
        margin: auto;
    }

    .speech-loading img{
        width: 100px;
        margin-top: 10px;
    }

    .speech-loading #button-arrow{
        display: none;
    }

    .speech-bubble-button {
        display: contents;
        opacity: 1;
    }


    /*  OTHER */
    .characters > #speech-user-avatar {
        position: absolute;
        top: 52%;
        left: 6%;
        z-index: 100;
    }

    .act-cinematics-wrapper {
        overflow: hidden;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        flex-direction: column;
        color:#054696;
        font-size: 22px;
        /*margin:20px 0px;*/
        font-family: 'Roboto', sans-serif;
        text-align: center;
    }

    .act-cinematics-center {
        position: relative;
        margin: auto 0;
    }

    .act-cinematics-background-image{
        /*width: 100%;*/
    }

    .characters {
        position: absolute;
        pointer-events: none;
        top: 0px;
        width: 100%;
        height: 100%;
    }

    .character-image{
        position: absolute;
        width: 130px;
    }

    .character-name {
        position: absolute;
        font-weight: bold;
    }

    #sarah-name-act-2 {
        top: 105%;
        left: 39%; /* 32%*/
        color:#054696;
    }

    #rafael-name-act-2 {
        top: 105%;
        left: 70%; /* 70%*/
        color:#21B22E;
    }

    #sarah-act-2 {
        top: 62%;
        left: 30%; /* 23%*/
        transform: scaleX(-1);
    }

    #rafael-act-2 {
        top: 58%;
        left: 66%;
    }

    .speech-loading #loading-gif{
        width: 40px;
        margin-top: 12px;
        margin-bottom: 6px;
    }

    .speech-loading #button-arrow{
        width: 17px;
        margin-top: 9px;
        margin-bottom: 6px;
    }

    @media (max-width: 500px) {
        .act-cinematics-wrapper {
            font-size: 18px;
        }

        .speech {
            top: -20%;
        }

        .speech-bubble {
            width: 79%;
            height: 150px;
            padding: 10px 0px;
        }


        

        #speech-bubble-wedge {
            width: 35px;
        }

        #sarah-act-2 {
            width: 110px;
        }

        #rafael-act-2 {
            width: 110px;
        }

        #sarah-name-act-2 {
            font-size: 17px;
            top:104%;
        }

        #rafael-name-act-2 {
            font-size: 17px;
            top:104%;
        }

        .speech-bubble-text {
            margin: auto 10px;
        }
    }
</style>